" .ideavimrc is a configuration file for IdeaVim plugin. It uses
"   the same commands as the original .vimrc configuration.
" You can find a list of commands here: https://jb.gg/h38q75
" Find more examples here: https://jb.gg/share-ideavimrc

set number
set relativenumber

set nohlsearch
set incsearch

set nowrap

set scrolloff=8

set colorcolumn=160

set ignorecase
set smartcase

set visualbell

" --- Enable IdeaVim plugins https://jb.gg/ideavim-plugins

Plug 'preservim/nerdtree'
Plug 'tpope/vim-surround'
Plug 'tpope/vim-commentary'
Plug 'machakann/vim-highlightedyank'

"" -- Map IDE actions to IdeaVim -- https://jb.gg/abva4t

let mapleader = ' '

nnoremap  <C-d>         <C-d>zz
nnoremap  <C-u>         <C-u>zz
nnoremap  <C-f>         <C-f>zz
nnoremap  <C-b>         <C-b>zz
nnoremap  N             Nzzzv
nnoremap  n             nzzzv

nnoremap  <leader>o     o<Esc>k
nnoremap  <leader>O     O<Esc>j

nnoremap  <leader>d     "_d
nnoremap  <leader>y     "+y
nnoremap  <leader>p     "+p

"Not sure what ideavim tries to do with default <C-o> and <C-i> settings, but it seems to jump all over the place
nmap       <C-o>         <Action>(Back)
nmap       <C-i>         <Action>(Forward)

nmap       gD            <Action>(GotoDeclaration)
nmap       gd            <Action>(GotoDeclaration)
nmap       K             <Action>(QuickImplementations)
nmap       gi            <Action>(ReSharperGotoImplementation)
nmap       <C-h>         <Action>(QuickJavaDoc)
nmap       <leader>rn    <Action>(RenameElement)
nmap       <leader>ca    <Action>(ShowIntentionActions)
vmap       <leader>ca    <Action>(ShowIntentionActions)
nmap       gr            <Action>(ShowUsages)
nmap       <leader>cc    <Action>(ReformatCode)
vmap       <leader>cc    <Action>(ReformatCode)
nmap       <leader>ee    <Action>(ShowErrorDescription)
nmap       <leader>ej    <Action>(GotoNextError)
nmap       <leader>ek    <Action>(GotoPreviousError)
nmap       gj            <Action>(MethodDown)
vmap       gj            <Action>(MethodDown)
nmap       gk            <Action>(MethodUp)
vmap       gk            <Action>(MethodUp)

nmap       <leader>ff    <Action>(GotoFile)
nmap       <leader>fw    <Action>(FindInPath)
nmap       <leader>fs    <Action>(GotoSymbol)
nmap       <leader>fds   <Action>(FileStructurePopup)

nmap       <leader>rr    <Action>(Run)
nmap       <leader>rs    <Action>(Stop)

"I don't really use these at the moments, but I might at some point. Disabling for now to prevent conflict with <leader>d
"nmap       <leader>ds    <Action>(Debug)
"nmap       <leader>dbt   <Action>(ToggleLineBreakpoint)
"nmap       <leader>dr    <Action>(Resume)
"nmap       <leader>dsi   <Action>(StepInto)
"nmap       <leader>dso   <Action>(StepOver)
"nmap       <leader>dsr   <Action>(StepOut)

nmap       <leader>bb    <Action>(BuildCurrentProject)
nmap       <leader>ba    <Action>(BuildWholeSolutionAction)
nmap       <leader>bc    <Action>(CleanSolutionAction)
nmap       <leader>bs    <Action>(CancelBuildAction)

nmap       <leader>tn    <Action>(RiderUnitTestRunContextAction)
nmap       <leader>tdn   <Action>(RiderUnitTestDebugContextAction)
nmap       <leader>ts    <Action>(RiderUnitTestSessionAbortAction)
nmap       <leader>tf    <Action>(RiderUnitTestSessionRerunFailedTestsAction)
nmap       <leader>ta    <Action>(RiderUnitTestRunSolutionAction)

"TODO: How much extra does this do compared to HideActiveWindow?
nmap       <leader>;     <Action>(HideAllWindows)
nmap       <leader>xq    <Action>(ActivateProblemsViewToolWindow)
nmap       <leader>ttw   <Action>(ActivateUnitTestsToolWindow)
nmap       <leader>wt    <Action>(ActivateTerminalToolWindow)
nmap       <leader>wb    <Action>(ActivateBuildToolWindow)
nmap       <leader>wp    <Action>(ActivateNuGetToolWindow)
nnoremap   <leader>nt    :NERDTreeToggle<CR>
nnoremap   <leader>ne    :NERDTreeFocus<CR>

nmap       <leader>qq    <Action>(Exit)

let g:NERDTreeMapPreview = 't'
"NERDTree default mappings
"o   Open files, directories and bookmarks
"O   Recursively open the selected directory
"x   Close the current node's parent
"X   Recursively close all children of the current node
"P   Jump to the root node
"p   Jump to the current node's parent
"q   Close the NERDTree window
